<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demon Slayer: L'Infini Train</title>
    <style>
        /* STYLES GÉNÉRAUX */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0a0a1a;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-image: url('https://i.ibb.co/KpZvZYRC/IMG-20250904-WA0076.jpg');
            background-size: cover;
            background-position: center;
        }
        
        h1 {
            color: #FF4500;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #8B0000;
            text-align: center;
        }
        
        /* CONTAINER DE JEU */
        #game-container {
            position: relative;
            width: 90%;
            max-width: 800px;
            height: 70vh;
            border: 3px solid #8B0000;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(139, 0, 0, 0.7);
            margin-bottom: 20px;
        }
        
        /* INTERFACE UTILISATEUR */
        #game-ui {
            width: 100%;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 2px solid #8B0000;
        }
        
        #score, #health {
            font-size: 1.2rem;
            font-weight: bold;
            text-shadow: 0 0 5px #FF4500;
        }
        
        #game-canvas {
            width: 100%;
            height: calc(100% - 50px);
            background: linear-gradient(to bottom, #1a1a2a, #0a0a1a);
            position: relative;
            overflow: hidden;
        }
        
        /* ÉCRANS DE DÉMARAGE ET GAME OVER */
        #start-screen, #game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            text-align: center;
        }
        
        #game-over {
            display: none;
        }
        
        #start-screen h2, #game-over h2 {
            color: #FF4500;
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #8B0000;
        }
        
        #start-screen p, #game-over p {
            margin-bottom: 30px;
            max-width: 80%;
            font-size: 1.1rem;
        }
        
        /* BOUTONS */
        #controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .control-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #8B0000, #FF4500);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
        }
        
        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 69, 0, 0.6);
        }
        
        #start-btn, #restart-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #8B0000, #FF4500);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.6);
        }
        
        #start-btn:hover, #restart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 7px 20px rgba(255, 69, 0, 0.8);
        }
        
        /* ÉLÉMENTS DE JEU */
        .character {
            position: absolute;
            transition: transform 0.2s;
        }
        
        #muzan {
            width: 60px;
            height: 80px;
            background: url('https://i.ibb.co/vvmzRHfh/20250904-163530.jpg');
            background-size: cover;
            z-index: 10;
        }
        
        .enemy {
            position: absolute;
            width: 50px;
            height: 70px;
            background: url('https://i.ibb.co/k2RYnRNL/20250904-163538.jpg');
            background-size: cover;
        }
        
        .platform {
            position: absolute;
            background: linear-gradient(to right, #8B0000, #450000);
            border: 2px solid #FF4500;
            border-radius: 5px;
        }
        
        .blood-effect {
            position: absolute;
            background: rgba(139, 0, 0, 0.7);
            border-radius: 50%;
            pointer-events: none;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            #game-container {
                width: 95%;
                height: 60vh;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .control-btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <h1>Démon Slayer: L'Infini Train</h1>
    
    <div id="game-container">
        <div id="game-ui">
            <div id="score">Score: 0</div>
            <div id="health">Vie: 100%</div>
        </div>
        <div id="game-canvas">
            <div id="start-screen">
                <h2>Muzan Jackson contre les Pilliers</h2>
                <p>Évitez les Pilliers et collectez des points en dansant sur le Train de l'Infini!</p>
                <button id="start-btn">Commencer à danser</button>
            </div>
            
            <div id="game-over">
                <h2>Game Over</h2>
                <p>Votre score: <span id="final-score">0</span></p>
                <button id="restart-btn">Rejouer</button>
            </div>
        </div>
    </div>
    
    <div id="controls">
        <button class="control-btn" id="left-btn">← Gauche</button>
        <button class="control-btn" id="right-btn">Droite →</button>
        <button class="control-btn" id="jump-btn">Sauter ↑</button>
        <button class="control-btn" id="attack-btn">Attaquer ✨</button>
    </div>

    <script>
        // Variables du jeu
        let gameActive = false;
        let score = 0;
        let health = 100;
        let muzan = null;
        let platforms = [];
        let enemies = [];
        let gameInterval;
        
        // Éléments DOM
        const gameCanvas = document.getElementById('game-canvas');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const scoreDisplay = document.getElementById('score');
        const healthDisplay = document.getElementById('health');
        const finalScoreDisplay = document.getElementById('final-score');
        
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const jumpBtn = document.getElementById('jump-btn');
        const attackBtn = document.getElementById('attack-btn');
        
        // Initialisation du jeu
        function initGame() {
            // Créer Muzan
            muzan = document.createElement('div');
            muzan.id = 'muzan';
            muzan.style.bottom = '100px';
            muzan.style.left = '50px';
            gameCanvas.appendChild(muzan);
            
            // Créer des plateformes
            createPlatform(0, 50, 300, 20);
            createPlatform(350, 100, 250, 20);
            createPlatform(150, 180, 200, 20);
            createPlatform(400, 250, 300, 20);
            
            // Démarrer le jeu
            gameActive = true;
            gameInterval = setInterval(updateGame, 50);
            
            // Générer des ennemis périodiquement
            setInterval(createEnemy, 2000);
        }
        
        function createPlatform(x, y, width, height) {
            const platform = document.createElement('div');
            platform.className = 'platform';
            platform.style.left = x + 'px';
            platform.style.bottom = y + 'px';
            platform.style.width = width + 'px';
            platform.style.height = height + 'px';
            gameCanvas.appendChild(platform);
            platforms.push(platform);
        }
        
        function createEnemy() {
            if (!gameActive) return;
            
            const enemy = document.createElement('div');
            enemy.className = 'enemy';
            enemy.style.bottom = '100px';
            enemy.style.right = '0px';
            gameCanvas.appendChild(enemy);
            enemies.push({
                element: enemy,
                speed: 2 + Math.random() * 3,
                health: 100
            });
        }
        
        function updateGame() {
            if (!gameActive) return;
            
            // Déplacer les ennemis
            enemies.forEach((enemy, index) => {
                const currentRight = parseInt(enemy.element.style.right || '0');
                enemy.element.style.right = (currentRight + enemy.speed) + 'px';
                
                // Vérifier les collisions avec Muzan
                if (isColliding(muzan, enemy.element)) {
                    takeDamage(10);
                    createBloodEffect(enemy.element);
                    enemy.element.remove();
                    enemies.splice(index, 1);
                }
                
                // Supprimer les ennemis hors écran
                if (currentRight > gameCanvas.offsetWidth) {
                    enemy.element.remove();
                    enemies.splice(index, 1);
                }
            });
            
            // Mettre à jour l'affichage du score et de la vie
            scoreDisplay.textContent = `Score: ${score}`;
            healthDisplay.textContent = `Vie: ${health}%`;
            
            // Vérifier la condition de défaite
            if (health <= 0) {
                endGame();
            }
        }
        
        function isColliding(element1, element2) {
            const rect1 = element1.getBoundingClientRect();
            const rect2 = element2.getBoundingClientRect();
            
            return !(
                rect1.right < rect2.left ||
                rect1.left > rect2.right ||
                rect1.bottom < rect2.top ||
                rect1.top > rect2.bottom
            );
        }
        
        function takeDamage(amount) {
            health -= amount;
            if (health < 0) health = 0;
            
            // Effet visuel de dégât
            muzan.style.opacity = '0.5';
            setTimeout(() => {
                if (muzan) muzan.style.opacity = '1';
            }, 200);
        }
        
        function createBloodEffect(element) {
            const blood = document.createElement('div');
            blood.className = 'blood-effect';
            
            const rect = element.getBoundingClientRect();
            const canvasRect = gameCanvas.getBoundingClientRect();
            
            blood.style.left = (rect.left - canvasRect.left) + 'px';
            blood.style.top = (rect.top - canvasRect.top) + 'px';
            blood.style.width = '50px';
            blood.style.height = '50px';
            
            gameCanvas.appendChild(blood);
            
            setTimeout(() => {
                blood.remove();
            }, 1000);
        }
        
        function attack() {
            if (!gameActive) return;
            
            // Animation d'attaque
            muzan.style.transform = 'scale(1.2)';
            setTimeout(() => {
                if (muzan) muzan.style.transform = 'scale(1)';
            }, 200);
            
            // Vérifier si un ennemi est touché
            enemies.forEach((enemy, index) => {
                if (isColliding(muzan, enemy.element)) {
                    enemy.health -= 50;
                    score += 10;
                    
                    if (enemy.health <= 0) {
                        createBloodEffect(enemy.element);
                        enemy.element.remove();
                        enemies.splice(index, 1);
                        score += 50;
                    }
                }
            });
        }
        
        function moveMuzan(direction) {
            if (!gameActive) return;
            
            const currentLeft = parseInt(muzan.style.left || '0');
            const newLeft = currentLeft + (direction * 10);
            
            // Limites de l'écran
            if (newLeft >= 0 && newLeft <= gameCanvas.offsetWidth - 60) {
                muzan.style.left = newLeft + 'px';
            }
        }
        
        function jump() {
            if (!gameActive) return;
            
            muzan.style.transition = 'bottom 0.3s';
            muzan.style.bottom = '200px';
            
            setTimeout(() => {
                if (muzan) {
                    muzan.style.bottom = '100px';
                }
            }, 300);
        }
        
        function endGame() {
            gameActive = false;
            clearInterval(gameInterval);
            
            finalScoreDisplay.textContent = score;
            gameOverScreen.style.display = 'flex';
        }
        
        function resetGame() {
            // Réinitialiser les variables
            score = 0;
            health = 100;
            
            // Supprimer tous les ennemis et plateformes
            enemies.forEach(enemy => enemy.element.remove());
            enemies = [];
            
            platforms.forEach(platform => platform.remove());
            platforms = [];
            
            if (muzan) {
                muzan.remove();
                muzan = null;
            }
            
            // Cacher l'écran de game over
            gameOverScreen.style.display = 'none';
            
            // Relancer le jeu
            initGame();
        }
        
        // Événements des boutons
        startBtn.addEventListener('click', () => {
            startScreen.style.display = 'none';
            initGame();
        });
        
        restartBtn.addEventListener('click', resetGame);
        
        leftBtn.addEventListener('click', () => moveMuzan(-1));
        rightBtn.addEventListener('click', () => moveMuzan(1));
        jumpBtn.addEventListener('click', jump);
        attackBtn.addEventListener('click', attack);
        
        // Contrôles clavier
        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    moveMuzan(-1);
                    break;
                case 'ArrowRight':
                    moveMuzan(1);
                    break;
                case 'ArrowUp':
                case ' ':
                    jump();
                    break;
                case 'a':
                case 'A':
                    attack();
                    break;
            }
        });
    </script>
</body>
    </html>
